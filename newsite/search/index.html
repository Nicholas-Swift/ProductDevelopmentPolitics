<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Product Development Politics.</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="DESCRIPTION HERE" />
		<meta name="keywords" content="KEY, WORDS, HERE" />
		<meta name="author" content="Nicholas Swift" />

		<!-- Style Sheets -->
		<link href="main.css" rel="stylesheet">

	</head>

	<body>

		<div class="search-nav">
			<a href="../index.html"><h1>Ward Search</h1></a>
				<form>
					<input id="searchTextField" name="search" type="text" placeholder="Enter your address and find a ward near you...">
					<input name="submit" type="submit" formaction="./index.html" method="GET" value="Search Wards">
			        <input name="map" type="submit" formaction="../map/index.html" method="GET" value="Map Search">
					<input type="hidden" />
			</form>
		</div>

		<div class="party-nav">
			<a href="wow">All</a>
			<a href="wow">ANC</a>
			<a href="wow">DA</a>
			<a href="wow">PAC</a>
			<a href="wow">FF+</a>
			<a href="wow">ANC</a>
			<a href="wow">AIC</a>
			<a href="wow">DA</a>
			<a href="wow">Agang</a>
			<a href="wow">AIC</a>
		</div>

		<div id="ward-info" class="ward-info">
			<!-- <div class="ward">
				<a href="lol"><h2>CSS3 box-shadow property - W3Schools</h2></a>
				<h3>www.w3schools.com/cssref/css3_pr_box-shadow.asp W3Schools</h3>
				<p>Used in casting shadows off block-level elements (like divs). .shadow ... This code would create a 10px red inset shadow in top and bottom:</p>
			</div>

			<div class="ward">
				<a href="lol"><h2>CSS3 box-shadow property - W3Schools</h2></a>
				<h3>www.w3schools.com/cssref/css3_pr_box-shadow.asp W3Schools</h3>
				<p>Used in casting shadows off block-level elements (like divs). .shadow ... This code would create a 10px red inset shadow in top and bottom:</p>
			</div>

			<div class="ward">
				<a href="lol"><h2>CSS3 box-shadow property - W3Schools</h2></a>
				<h3>www.w3schools.com/cssref/css3_pr_box-shadow.asp W3Schools</h3>
				<p>Used in casting shadows off block-level elements (like divs). .shadow ... This code would create a 10px red inset shadow in top and bottom:</p>
			</div>

			<div class="ward">
				<a href="lol"><h2>CSS3 box-shadow property - W3Schools</h2></a>
				<h3>www.w3schools.com/cssref/css3_pr_box-shadow.asp W3Schools</h3>
				<p>Used in casting shadows off block-level elements (like divs). .shadow ... This code would create a 10px red inset shadow in top and bottom:</p>
			</div>

			<div class="ward">
				<a href="lol"><h2>CSS3 box-shadow property - W3Schools</h2></a>
				<h3>www.w3schools.com/cssref/css3_pr_box-shadow.asp W3Schools</h3>
				<p>Used in casting shadows off block-level elements (like divs). .shadow ... This code would create a 10px red inset shadow in top and bottom:</p>
			</div>

			<div class="ward">
				<a href="lol"><h2>CSS3 box-shadow property - W3Schools</h2></a>
				<h3>www.w3schools.com/cssref/css3_pr_box-shadow.asp W3Schools</h3>
				<p>Used in casting shadows off block-level elements (like divs). .shadow ... This code would create a 10px red inset shadow in top and bottom:</p>
			</div>

			<div class="ward">
				<a href="lol"><h2>CSS3 box-shadow property - W3Schools</h2></a>
				<h3>www.w3schools.com/cssref/css3_pr_box-shadow.asp W3Schools</h3>
				<p>Used in casting shadows off block-level elements (like divs). .shadow ... This code would create a 10px red inset shadow in top and bottom:</p>
			</div> -->
		</div>

		<div class="addWard">

			<h2>Are you part of a ward you don't see here?</h2>
			<p>Ward Search is constantly growing and looking for new wards to add. Add your ward so that others can find you easily and join your cause.</p>
			<input id="addWardButton" name="addWardButton" type="submit" value="Add Ward">

		</div>

		<div class="footer">

			<div class="left">
				<a href="hello"><p>About</p></a>
			</div>

			<div class="right">
				<a href="hello"><p>Privacy</p></a>
				<a href="hello"><p>Terms</p></a>
				<a href="hello"><p>Settings</p></a>
			</div>
		</div>

		<div id="addWardContainer" class="addWardContainer hidden-true">
			<div id="addWardForm" class="addWardForm">
				<h2>Add A Ward</h2>
				<p>Once we verify your ward, it will be added.</p>

				<form name="contact-form" class="fadeInBlock">

					<p>
				    <input id="formWardNumber" name="wardNumber" type="text" placeholder="Ward Number">
				    </p>

				    <p>
				    <input id="formProvince" name="Province" type="text" placeholder="Province">
				    </p>

				    <p>
				    <input id="formPhysicalAddress" name="Physical Address" type="text" placeholder="Physical Address">
				    </p>

		        	<p>
		            <input id="formFirstName" name="firstName" type="text" placeholder="Ward Councillor First Name">
		            </p>

		            <p>
		            <input id="formLastName" name="lastName" type="text" placeholder="Ward Councillor Last Name">
		            </p>

		            <p>
		            <input id="formPhoneNumber" name="phoneNumber" type="text" placeholder="Ward Councillor Phone Number">
		            </p>

		            <p class="emailbox">
		            <input id="formEmailAddress" name="emailAddress" type="text" placeholder="Ward Councillor Email Address">
		            </p>

		            <p class="emailbuttons">
		            <input id="submitWardButton" name="submit" type="submit" value="Submit">
		            </p>
		        </form>
			</div>
		</div>

	    <div id="map"></div>

	    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

	    <!-- User Query Parameters JavaScript -->
	    <script>

	    	function getParameterByName(name, url) {
			    if (!url) {
			    	url = window.location.href;
			    }
			    name = name.replace(/[\[\]]/g, "\\$&");
			    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
			    	results = regex.exec(url);
			    if (!results) return null;
			    if (!results[2]) return '';
			    return decodeURIComponent(results[2].replace(/\+/g, " "));
			}

			var search = getParameterByName('search');
			var input = document.getElementById('searchTextField');
			input.value = search

		 	$.ajax({
	            type: "GET", //rest Type
	            dataType: 'json', //mispelled
	            url: "http://127.0.0.1:5000/wards",
	            async: true,
	            contentType: "application/json; charset=utf-8",
	            success: function (data) {
	                // console.log(data);

	                var source = $("#project-template").html();
	                var projectTemplate = Handlebars.compile(source);

	                // Loop through data and display content 
	                var content = "";

	                for (var i in data["message"]) {
	                	// console.log(i);
	                	content += projectTemplate(data["message"][i])
	                }

	                // Add the navbar content to the page
	                $("#ward-info").html(content);
	            }
			});

	    </script>

	    <!-- Add Ward Front End JavaScript -->
	    <script>

	    	$("#addWardButton").click(function() {
	    		$("#addWardContainer").removeClass("hidden-true");
	    		$("#addWardContainer").animate({opacity:1},200);
	    	});

	    	$("#addWardForm").click(function() {
    			return false;
    		});

	    	$("#addWardContainer").click(function() {
	    		$("#addWardContainer").animate({opacity:0},200, function() {
	    			$("#addWardContainer").addClass("hidden-true");
	    		});
	    	});

	    </script>

	    <!-- Add Ward Backend Server -->
	    <script>

	    	$("#submitWardButton").click(function() {

	    		var dataToSend = JSON.stringify({
		  			// "firstName": "Nicholas",
	      //       	"lastName": "Swift",
	      //       	"phoneNumber": "123 456 7891",
	      //       	"emailAddress": "ward@wardnames.com",
	      //       	"wardNumber": "69",
	      //       	"Province": "California",
	      //       	"PhysicalAddress": "Houghton Drive, Johannesburg, South Africa"

	     		 	"firstName": $('#formFirstName').val(),
	            	"lastName": $('#formLastName').val(),
	            	"phoneNumber": $('#formPhoneNumber').val(),
	            	"emailAddress": $('#formEmailAddress').val(),
	            	"wardNumber": $('#formWardNumber').val(),
	            	"Province": $('#formProvince').val(),
	            	"PhysicalAddress": $('#formPhysicalAddress').val()
		  		});

		  		console.log(dataToSend);

			 	$.ajax({
		            type: "POST", //rest Type
		            dataType: 'json', //mispelled
		            url: "http://127.0.0.1:5000/wards",
		            async: true,
		            contentType: "application/json",
		            data: dataToSend,
		            success: function (data) {
		            	console.log(dataToSend);
		                console.log(data);
		            }
				});

				$("#addWardContainer").animate({opacity:0},200, function() {
			 			$("#addWardContainer").addClass("hidden-true");
			 		});

	    	});

	    </script>

	    <!-- Ward Template -->
	    <script id="project-template" type="text/x-handlebars-template">

			<div class="ward">
				<h2>Ward {{wardNumber}}</h2>
				<h3><em>{{Province}} -- {{PhysicalAddress}}</em></h3>
				<p>Councillor: {{firstName}} {{lastName}} </p>
				<p>Email: {{emailAddress}}</p>
				<p>Phone #: {{phoneNumber}}</p>
			</div>

	    </script>

	    <!-- Google Maps -->
	    <script type="text/javascript">
		    function initMap() {
		        var uluru = {lat: -25.731, lng: 28.218};
		        var map = new google.maps.Map(document.getElementById('map'), {
		        	zoom: 7,  
		        	center: uluru
		    	});
		       	var options = { 
		            types: ['(cities)'],
		            componentRestrictions: {country: "south africa"}
					};
		        var marker = new google.maps.Marker({
		          position: uluru,
		          map: map
		        });
		      
		     	var input = document.getElementById('searchTextField');
		    	var autocomplete = new google.maps.places.Autocomplete(input);
			}
		        
		 	google.maps.event.addDomListener(window, 'load', initMap);
	    </script>

	    <script async defer
	        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDYehaRd52hQNiohbE6reUYZXp_jJX12XU&libraries=places&callback=initMap">
	    </script>

	    <!-- <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script> -->
	    <script src="../js/handlebars-v4.0.5.js"></script>
	    <!-- <script src="../js/data.js"></script>
	    <script src="../js/main.js"></script> -->

	</body>

</html>